#!/usr/bin/python
# -*- coding: utf-8 -*-

'test feature porcess'

__author__ = 'xusheng'

import ctypes,sys,time
#sys.path.append('/home/xusheng/code/test/FeatureProcess')

def feature_calc(srcFeat,desFeat):
	lib_handle = ctypes.CDLL('./libfeatureprocess.so')
	func = lib_handle.feature_process
	func.argtypes=[ctypes.c_char_p,ctypes.c_char_p]
	func.restype = ctypes.c_float
	res = func(srcFeat,desFeat)
	print res

'''
index = 128
srcFeat = []
desFeat = []
while index > 0:
	srcFeat.append('1.1')
	desFeat.append('0.15')
	index -= 1
srcFeat[23] = '0.215'
desFeat[23] = '0.3415'
str_src_feat = ','.join(srcFeat)
str_des_feat = ','.join(desFeat)
feature_calc(str_src_feat,str_des_feat)
'''
src_feat = '-0.025368738919496536, 0.2076958566904068, 0.04809662699699402, -0.06289419531822205, -0.031003087759017944, -0.2003185749053955, 0.10453671962022781, 0.17627672851085663, -0.007640973199158907, 0.006473194807767868, 0.08533036708831787, 0.14888079464435577, 0.00740083958953619, 0.003483086358755827, -0.14951267838478088, 0.10789597779512405, 0.06098176911473274, 0.04546034708619118, -0.029225153848528862, -0.054497018456459045, 0.02685619704425335, 0.032335925847291946, -0.08310093730688095, 0.09974081814289093, -0.04006155580282211, -0.15343594551086426, 4.485614044824615e-05, 0.025091100484132767, 0.04898227006196976, 0.050658367574214935, -0.041700951755046844, -0.04878769442439079, 0.09086450189352036, -0.10961995273828506, -0.08598314225673676, -0.2475649118423462, 0.022801222279667854, -0.012464219704270363, 0.05618806183338165, 0.10798335820436478, 0.032908521592617035, -0.031083976849913597, 0.08747367560863495, 0.026065733283758163, 0.04255295172333717, -0.13101579248905182, -0.04046277701854706, 0.07635785639286041, -0.03457348793745041, -0.021529421210289, 0.19251704216003418, 0.02247948758304119, -0.026984095573425293, 0.09573356807231903, 0.012703773565590382, -0.06774056702852249, -0.07025904953479767, 0.0017721349140629172, 0.073951855301857, -0.008843748830258846, 0.005094864871352911, -0.14855296909809113, -0.14293807744979858, -0.020614124834537506, -0.18992841243743896, -0.030662277713418007, 0.06486641615629196, -0.07906974852085114, -0.015371366403996944, -0.16144883632659912, -0.0041557252407073975, -0.010246360674500465, -0.01112988218665123, 0.15562483668327332, 0.023960880935192108, 0.04099209979176521, 0.08185586333274841, 0.12890273332595825, -0.14182467758655548, 0.02982425130903721, 0.1446208506822586, 0.051618728786706924, -0.023930583149194717, 0.14030936360359192, 0.014217394404113293, 0.03192421793937683, 0.08186225593090057, -0.045251745730638504, 0.09439389407634735, -0.012694835662841797, 0.03291057422757149, -0.014380781911313534, 0.07862208783626556, -0.037757474929094315, -0.09428665041923523, -0.09130357950925827, -0.06667200475931168, 0.030644647777080536, -0.11671000719070435, -0.02531038597226143, -0.11780276149511337, 0.07571655511856079, 0.04826997593045235, 0.013575074262917042, 0.17508146166801453, 0.1605488806962967, 0.08326907455921173, -0.18210294842720032, 0.029083194211125374, 0.0843428298830986, -0.05714094638824463, 0.052798762917518616, 0.013995131477713585, -0.00026896450435742736, 0.038812752813100815, -0.13487546145915985, -0.03905725106596947, 0.11250346153974533, 0.059656087309122086, 0.0014497056836262345, -0.04779065400362015, -0.027911169454455376, 0.007200563792139292, -0.1746314913034439, -0.14112992584705353, -0.05365215614438057, 0.09261477738618851, -0.05321589484810829'
	
des_feat = '-0.04508848115801811, 0.1649637520313263, 0.03652994707226753, 0.12103449553251266, -0.026508789509534836, -0.04054411128163338, -0.004706656094640493, -0.10440607368946075, -0.041293155401945114, -0.008930347859859467, 0.09987298399209976, -0.06774231791496277, 0.022658707574009895, -0.013907848857343197, -0.01851120963692665, -0.043588679283857346, 0.10100151598453522, 0.06126488745212555, -0.06315449625253677, -0.021078184247016907, 0.0023955421056598425, 0.03655077889561653, -0.04012903943657875, 0.03122691437602043, -0.12100300192832947, -0.0036196045111864805, -0.03203102946281433, 0.029596854001283646, 0.08771178126335144, -0.08097640424966812, -0.049361441284418106, -0.05042056366801262, 0.029287833720445633, -0.07727435976266861, -0.1006685197353363, -0.13803768157958984, -0.09149806946516037, -0.11296027898788452, 0.046647295355796814, 0.04320395737886429, 0.22887392342090607, -0.00706471037119627, 0.07915881276130676, -0.0038873159792274237, -0.15274299681186676, -0.19539079070091248, 0.01400281023234129, 0.0034911702387034893, -0.06039253622293472, 0.03174913674592972, 0.08468920737504959, -0.022023741155862808, 0.0311481524258852, 0.19627316296100616, -0.007201094646006823, 0.023531462997198105, 0.021591676399111748, -0.2295510172843933, 0.12935978174209595, 0.08364737033843994, -0.11128353327512741, -0.04200213402509689, -0.03775237500667572, -0.060171306133270264, -0.21693356335163116, -0.042944423854351044, 0.03473472595214844, -0.026259344071149826, 0.050973743200302124, -0.09711181372404099, -0.100657619535923, 0.10426848381757736, -0.101680226624012, 0.16586166620254517, -0.01795482262969017, -0.05156232416629791, 0.08337707817554474, 0.07370210438966751, -0.0481242835521698, -0.16336806118488312, -0.019672879949212074, 0.008744279853999615, -0.06019214913249016, 0.05195019766688347, 0.08042538911104202, -0.10334844887256622, -0.13802050054073334, 0.030922692269086838, 0.0140334852039814, 0.07960827648639679, 0.03900040686130524, -0.07453467696905136, -0.0012004115851595998, 0.018544737249612808, -0.20562328398227692, 0.0834846943616867, 0.06647080928087234, 0.0840158462524414, -0.07135537266731262, -0.06645998358726501, 0.006923649460077286, 0.12258011847734451, -0.10500368475914001, 0.07581568509340286, 0.000355873053194955, 0.13271278142929077, 0.0776800587773323, -0.07934650033712387, 0.130689799785614, 0.07616642862558365, 0.018351225182414055, 0.14911501109600067, 0.007672163192182779, -0.09699073433876038, -0.023278547450900078, -0.1295657753944397, -0.01966824382543564, 0.013113213703036308, -0.09740830957889557, 0.006485836114734411, -0.056692466139793396, 0.11100924760103226, 0.14266736805438995, -0.19488507509231567, 0.07439834624528885, -0.11404439061880112, 0.02985413186252117, -0.048643507063381234'

print time.time()
feature_calc(src_feat,des_feat)
